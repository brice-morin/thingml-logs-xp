/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import no.sintef.jasm.*;
import no.sintef.jasm.ext.*;

import org.thingml.generated.api.*;
import org.thingml.generated.messages.*;

import java.util.*;

/**
 * Definition for type : ConsoleLogger
 **/
public class ConsoleLogger extends Component implements IConsoleLogger_log {

private boolean debug = false;
public boolean isDebug() {return debug;}
public void setDebug(boolean debug) {this.debug = debug;}
public String toString() {
String result = "instance " + getName() + "\n";
result += "\tACTIVATE_ON_STARTUP = " + Logger_ACTIVATE_ON_STARTUP_var;
result += "\tHAS_SIGNED_BYTE = " + Logger_HAS_SIGNED_BYTE_var;
result += "\tQUIET = " + ConsoleLogger_QUIET_var;
result += "";
return result;
}

public synchronized void log_on_via_log(){
final Event _msg = log_onType.instantiate();
_msg.setPort(log_port);
receive(_msg);
}

public synchronized void log_off_via_log(){
final Event _msg = log_offType.instantiate();
_msg.setPort(log_port);
receive(_msg);
}

public synchronized void log_via_log(byte[] LogMsgs_log_payload_var, int LogMsgs_log_size_var){
final Event _msg = logType.instantiate(LogMsgs_log_payload_var, LogMsgs_log_size_var);
_msg.setPort(log_port);
receive(_msg);
}

//Attributes
private boolean ConsoleLogger_QUIET_var;
private boolean Logger_ACTIVATE_ON_STARTUP_var;
private boolean Logger_HAS_SIGNED_BYTE_var;
//Ports
private Port log_port;
//Message types
protected final Log_onMessageType log_onType = new Log_onMessageType();
protected final Log_offMessageType log_offType = new Log_offMessageType();
protected final LogMessageType logType = new LogMessageType();
//Empty Constructor
public ConsoleLogger() {
super();
}

//Getters and Setters for non readonly/final attributes
public boolean getConsoleLogger_QUIET_var() {
return ConsoleLogger_QUIET_var;
}

public ConsoleLogger initConsoleLogger_QUIET_var(boolean ConsoleLogger_QUIET_var) {
this.ConsoleLogger_QUIET_var = ConsoleLogger_QUIET_var;
return this;
}

public boolean getLogger_ACTIVATE_ON_STARTUP_var() {
return Logger_ACTIVATE_ON_STARTUP_var;
}

public ConsoleLogger initLogger_ACTIVATE_ON_STARTUP_var(boolean Logger_ACTIVATE_ON_STARTUP_var) {
this.Logger_ACTIVATE_ON_STARTUP_var = Logger_ACTIVATE_ON_STARTUP_var;
return this;
}

public boolean getLogger_HAS_SIGNED_BYTE_var() {
return Logger_HAS_SIGNED_BYTE_var;
}

public ConsoleLogger initLogger_HAS_SIGNED_BYTE_var(boolean Logger_HAS_SIGNED_BYTE_var) {
this.Logger_HAS_SIGNED_BYTE_var = Logger_HAS_SIGNED_BYTE_var;
return this;
}

//Getters for Ports
public Port getLog_port() {
return log_port;
}
private CompositeState buildLogger(){
final AtomicState state_Logger_null_STARTUP = new AtomicState("STARTUP");
final AtomicState state_Logger_null_ON = new AtomicState("ON");
final AtomicState state_Logger_null_OFF = new AtomicState("OFF");
Transition h501530336 = new Transition();
h501530336.from(state_Logger_null_STARTUP).to(state_Logger_null_ON);
h501530336.guard((Event e)->{
return getLogger_ACTIVATE_ON_STARTUP_var();
});

Transition h1019714562 = new Transition();
h1019714562.from(state_Logger_null_STARTUP).to(state_Logger_null_OFF);
h1019714562.guard((Event e)->{
return  !(getLogger_ACTIVATE_ON_STARTUP_var());
});

Handler h1373254373 = new Handler();
h1373254373.from(state_Logger_null_ON);
h1373254373.event(logType);
h1373254373.port(log_port);
h1373254373.action((Event e)->{
final LogMessageType.LogMessage log = (LogMessageType.LogMessage) e;
do_log((byte[]) (log.payload), (int) (log.size));
});

Transition h1760493989 = new Transition();
h1760493989.from(state_Logger_null_ON).to(state_Logger_null_OFF);
h1760493989.event(log_offType);
h1760493989.port(log_port);
Transition h1696136701 = new Transition();
h1696136701.from(state_Logger_null_OFF).to(state_Logger_null_ON);
h1696136701.event(log_onType);
h1696136701.port(log_port);
final CompositeState state_Logger = new CompositeState("null");
state_Logger.onEntry(()->{
});
state_Logger.add(state_Logger_null_STARTUP);
state_Logger.add(state_Logger_null_ON);
state_Logger.add(state_Logger_null_OFF);
state_Logger.initial(state_Logger_null_STARTUP);
return state_Logger;
}

public Component buildBehavior(String session, Component root) {
if (root == null) {
//Init ports
log_port = new Port("log", this);
} else {
log_port = ((ConsoleLogger)root).log_port;
}
if (session == null){
//Init state machine
behavior = buildLogger();
}
return this;
}

 void do_log(final byte[] ConsoleLogger_do_log_payload_var, final int ConsoleLogger_do_log_size_var) {
if( !(getConsoleLogger_QUIET_var())) {
final byte log_type_var = (byte) (ConsoleLogger_do_log_payload_var[(int)(0)]);

if(log_type_var == 0) {
System.out.print(""+("log: function_called  ["));

} else {
if(log_type_var == 1) {
System.out.print(""+("log: property_changed ["));

} else {
if(log_type_var == 2) {
System.out.print(""+("log: message_lost     ["));

} else {
if(log_type_var == 3) {
System.out.print(""+("log: message_sent     ["));

} else {
if(log_type_var == 4) {
System.out.print(""+("log: message_handled  ["));

} else {
System.out.print(""+("log: unknown          ["));

}

}

}

}

}

}
int i_var = (int) (0);

while(i_var < ConsoleLogger_do_log_size_var) {
final byte v_var = (byte) (ConsoleLogger_do_log_payload_var[(int)(i_var)]);

if(getLogger_HAS_SIGNED_BYTE_var()) {
System.out.print(""+((v_var & 0xFF)));

} else {
System.out.print(""+(v_var));

}
if( !(getConsoleLogger_QUIET_var())) {
System.out.print(""+(","));

}
i_var++;

}
if( !(getConsoleLogger_QUIET_var())) {
System.out.println(""+("]"));

} else {
System.out.println(""+(""));

}
}
}
